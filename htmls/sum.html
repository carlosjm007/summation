{% extends 'base.html' %}
{% load staticfiles %}
{% block contenido %}
<div class="col-lg-12">
	<h1 class="page-header">Cube Summation</h1>
</div>

<div class="row">
	<div class="col-lg-12">
		<div class="panel panel-default">
			<div class="panel-heading">
				Configura tu cubo
			</div>
			<div class="panel-body">
				<div class="row">
					<div class="col-lg-6">
						<div id="formConfig">
							<form id="configuracion" role="form">
								<div id="casosPrueba" class="form-group">
									<label>Casos de prueba "T"</label>
									<input required class="form-control" id="T" name="T" type="number" min="1" max="50" placeholder="¿Cuantos casos de prueba deseas realizar?">
									<p class="help-block">Solo se permiten entre 1 y 50 casos de prueba.</p>
								</div>
								<div id="tamanoCubo" class="form-group">
									<label>Tamaño de cubo "N"</label>
									<input required class="form-control" id="N" name="N" type="number" min="1" max="100" placeholder="Define el tamaño del cubo">
									<p class="help-block">Recuerda que el tamaño del cubo será de NxN y este número debe estar entre 1 y 100.</p>
									<p class="help-block">La visualización se realizará si N es menor a 8.</p>
								</div>
								<div id="operaciones" class="form-group">
									<label>Operaciones "M"</label>
									<input required class="form-control" id="M" name="M" type="number" min="1" max="1000" placeholder="¿Cuantas operaciones deseas realizar?">
									<p class="help-block">Podrás realizar un maxino de 1000 operaciones.</p>
								</div>							
								<div class="form-group" align="center">
									<button type="submit" class="btn btn-info btn-circle btn-xl" title="Iniciar"><i class="fa fa-check"></i>
									</button>
									<button type="button" class="btn btn-danger btn-circle btn-xl" onclick="$('#configuracion').trigger('reset');" title="Cancelar"><i class="fa fa-times"></i>
									</button>
								</div>
							</form>
						</div>
						<div align="center" id="consultas">
								<h2>Realiza tus consultas</h2>
								<br>
								<div class="row">
									<div class="col-lg-6">
										<label>
											<input type="radio" name="optionsRadios" id="optionsRadios1" value="option1"> Update
										</label>
									</div>
									<div class="col-lg-6">
										<label>
											<input type="radio" name="optionsRadios" id="optionsRadios2" value="option2"> Query
										</label>
									</div>
								</div>
						</div>
					</div>
					<div class="col-lg-6">
						<div align="center" id="cubo"></div>
					</div>
				</div>
			</div>
			<!-- <div id="toTemplates">asdasdf</div> -->
		</div>
	</div>
</div>
<script type="text/javascript" src="{% static 'js/p5.js' %}"></script>
<script type="text/javascript">
$("#cubo, #consultas").hide();
$("#configuracion").submit(function(event){
	$("#cubo").show();
	event.preventDefault();
	$N = $("#configuracion #N").val();
	$("#configuracion #T").val($("#configuracion #T").val() - 1);
	$("#configuracion #T").prop('disabled', true);
	if ($("#configuracion #T").val() == 0){
		$("#configuracion #T").prop('disabled', false);
		$('#configuracion').trigger('reset');
	}else{
		$("#formConfig").hide();
		$("#consultas").show();
	}
});
</script>
<script type="text/javascript">
// http://p5js.org/reference/#/p5.Element/parent
var $N = 1;
var espacio;
var $cubo;
var oo;
var $trans = [];
function calculo(N){
	espacio = 400/N;
	$cubo = espacio/7;
	$trans = [];
	for(oo = 0 ; oo < N ; oo = oo + 1){
		$trans[oo] = espacio;
	}
}
function setup() {
	var u = createCanvas(500, 500, WEBGL);
	u.parent("cubo");
}

function draw() {
	background(255);
	// Orange point light on the right
	orbitControl();

	// pointLight(150, 100, 0, 0, 0, 200);
	// // Blue directional light from the left
	// directionalLight(0, 255, 255, 0, 0, 0);
	// // Yellow spotlight from the front
	// pointLight(0, 255, 255, 0, 0, 300);
	rotateY(map(mouseX, 0, width, 0, PI));
	rotateX(map(mouseY, 0, height, 0, PI));
	translate(-200, -200, -200);
	var i, j, k;
	calculo($N);
	for(i in $trans){
		translate(0, 0, $trans[i]);
		for(j in $trans){
			translate(0, $trans[j], 0);
			for(k in $trans){
				// if(k > 3 && k < 5){
				// 	pointLight(200, 0, 0, 0, 0, 200);
				// 	// Blue directional light from the left
				// 	directionalLight(200, 255, 255, 0, 0, 0);
				// 	// Yellow spotlight from the front
				// 	pointLight(0, 255, 255, 0, 0, 300);
				// }
				box($cubo);
				translate($trans[k], 0, 0);
			}
			translate(-400, 0, 0);
		}
		translate(0, -400, 0);
	}
}
</script>
<script id="plantilla_selec" type="text/x-handlebars-template">
	<div class="form-group">
		<label>Tamaño de cubo "N"</label>
		<input required class="form-control" id="N" name="N" type="number" min="1" max="100" placeholder="Define el tamaño del cubo">
		<p class="help-block">Recuerda que el tamaño del cubo será de NxN y este número debe estar entre 1 y 100.</p>
		<p class="help-block">La visualización se realizará si N es menor a 8.</p>
	</div>
	<div class="form-group">
		<label>Operaciones "M"</label>
		<input required class="form-control" id="M" name="M" type="number" min="1" max="1000" placeholder="¿Cuantas operaciones deseas realizar?">
		<p class="help-block">Podrás realizar un maxino de 1000 operaciones.</p>
	</div>
</script>
{% endblock %}